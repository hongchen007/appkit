<?php/** * Created by PhpStorm. * User: Administrator * Date: 2019/7/17 * Time: 17:37 */namespace app\admin\controller;use think\Controller;use think\facade\Session;class Base extends Controller{    public function initialize()    {        // 当前路由信息        $this->getRouteinfo();    }    /**     * 解析当前路由参数 （分组名称、控制器名称、方法名）     */    protected function getRouteinfo()    {        // 控制器名称        $this->controller = toUnderScore($this->request->controller());        // 方法名称        $this->action = $this->request->action();        // 控制器分组 (用于定义所属模块)        $groupstr = strstr($this->controller, '.', true);        $this->group = $groupstr !== false ? $groupstr : $this->controller;        // 当前uri        $this->routeUri = $this->controller . '/' . $this->action;        //验证session        if($this->routeUri == "login/index"){            return true;        }else{            if(!Session::get('userinfo')){                $this->redirect('Login/index');            }        }    }    /**     * 获取post数据 (数组)     * @param $key     * @return mixed     */    protected function postData($key)    {        return $this->request->post($key . '/a');    }    //上传图片    public function upload()    {        // 获取表单上传文件 例如上传了001.jpg        $file = request()->file('file');        // 移动到框架应用根目录/uploads/ 目录下        $info = $file->move('./uploads');        if ($info) {            // 输出 20160820/42a79759f284b767dfcb2a0197904287.jpg            echo ajax('/uploads/' . $info->getSaveName());        } else {            return false;        }    }}