<!DOCTYPE html><html><head>    <meta charset="utf-8">    <title>layuiAdmin 内容系统-</title>    <meta name="renderer" content="webkit">    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="viewport"          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">    <link rel="stylesheet" href="/static/layuiadmin/layui/css/layui.css" media="all">    <link rel="stylesheet" href="/static/layuiadmin/style/admin.css" media="all"></head><body><div class="layui-fluid">    <div class="layui-card">        <div class="layui-card-header layuiadmin-card-header-auto">            <button class="layui-btn layuiadmin-btn-tags add" data-type="add">添加</button>        </div>        <div class="layui-card-body">            <table id="LAY-app-content-list" lay-filter="LAY-app-content-list"></table>            <script type="text/html" id="table-content-list">                <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i                        class="layui-icon layui-icon-edit"></i>编辑</a>                <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i                        class="layui-icon layui-icon-delete"></i>删除</a>            </script>        </div>    </div></div><script src="/static/layuiadmin/layui/layui.js"></script><script>    layui.config({        base: '/static/layuiadmin/' //静态资源所在路径    }).extend({        index: 'lib/index' //主入口模块    }).use(['table', 'layer', 'jquery'], function () {        var table = layui.table        var $ = layui.$ //重点处        table.render({            elem: '#LAY-app-content-list'            , url: '/admin/features/imglist' //数据接口            , page: true //开启分页            , cols: [[ //表头                {field: 'id', 'title': 'ID', id: 'id'}                , {                    field: 'features_img', 'title': '示例图', features_img: 'features_img', templet: function (e) {                        return '<img  src="' + e.features_img + '">'                    }                }                , {                    field: 'lcon_pic', 'title': '功能小图', lcon_pic: 'lcon_pic', templet: function (e) {                        return '<img  src="' + e.lcon_pic + '">'                    }                }                , {field: 'features_des', 'title': '功能描述', features_des: 'features_des'}                , {fixed: 'right', width: 165, align: 'center', toolbar: '#table-content-list', title: '操作'}            ]]        });        table.on('tool(LAY-app-content-list)', function (obj) { //注：tool是工具条事件名，test是table原始容器的属性 lay-filter="对应的值"            // var data=obj.data.id;            // console.log(data);            if (obj.event == 'del') {                layer.confirm('确定删除么？', function (index) {                    $.post('/admin/features/img_del', {'id': obj.data.id}, function (i) {                        if (i == 1) {                            layer.msg('删除成功！！！')                            setTimeout(function (){                                window.location.reload()                            }, 2000);                        } else {                            layer.msg('删除失败')                        }                    })                })            } else {                layer.open({                    type: 2                    , title: '修改About'                    , content: 'update_edit?id=' + obj.data.id                    , area: ['95%', '95%']                    , btn: ['确定', '取消']                    , yes: function (index, layero) {                        var features_des = layero.find('iframe').contents().find(".layui-input").val();                        var locn = layero.find('iframe').contents().find("input[type='radio']:checked").val();                        var features_img = layero.find('iframe').contents().find(".layui-input_img").val();                        var id = layero.find('iframe').contents().find(".layui-input_id").val();                        $.post('/admin/features/update_edit', {'features_des': features_des, 'locn':                                locn, 'features_img': features_img, 'id': id},                            function (i) {                            if (i == 1) {                                layer.msg('修改成功！！！')                                setTimeout(function (){                                    window.location.reload()                                }, 2000);                            } else if (i == 3) {                                layer.msg('功能描述 必须要3到50个字符!!!')                            } else {                                layer.msg('修改失败')                            }                        })                    }                });            }        });        $('.add').click(function () {            layer.open({                type: 2                , title: '添加Features'                , content: 'add_img.html'                , area: ['95%', '95%']                , btn: ['确定', '取消']                , yes: function (index, layero) {                    var features_des = layero.find('iframe').contents().find(".layui-input").val();                    var locn = layero.find('iframe').contents().find("input[type='radio']:checked").val();                    var features_img = layero.find('iframe').contents().find(".layui-input_img").val();                    $.post('/admin/features/add_insert', {'features_des': features_des, 'locn':                        locn, 'features_img': features_img}, function (i) {                        if (i == 1) {                            layer.msg('添加成功！！！')                            setTimeout(function (){                                window.location.reload()                            }, 2000);                        } else if(i == 2) {                            layer.msg('添加失败')                        } else if (i==3) {                            layer.msg('功能描述 必须要3到50个字符')                        }else{                            layer.msg('图片不能为空')                        }                    })                }            });        })    });</script></body></html>